# تحديث نظام الامتحانات للمدرس

## التغييرات المطبقة

تم تحديث صفحة إدارة الامتحانات للمدرس (`src/app/dashboard/teacher/exams/page.tsx`) لتشمل:

### 1. الحقول الجديدة

#### في واجهة Exam:
- `teacherId`: معرف المدرس (مربوط بالمدرس الحالي تلقائياً)
- `title`: اسم الامتحان
- `className`: اسم الصف (مثال: الصف الأول الثانوي)
- `duration`: المدة بالدقائق
- `totalMarks`: الدرجة الكلية
- `startDate`: تاريخ ووقت بداية الامتحان
- `endDate`: تاريخ ووقت نهاية الامتحان
- `questions`: قائمة الأسئلة
- `createdAt`: تاريخ الإنشاء

### 2. نموذج الإضافة/التعديل

النموذج الجديد يتضمن:

```typescript
{
  title: string;           // اسم الامتحان
  className: string;       // اسم الصف
  duration: number;        // المدة بالدقائق
  totalMarks: number;      // الدرجة الكلية
  startDate: string;       // تاريخ البداية (YYYY-MM-DD)
  startTime: string;       // وقت البداية (HH:MM)
  endDate: string;         // تاريخ النهاية (YYYY-MM-DD)
  endTime: string;         // وقت النهاية (HH:MM)
}
```

### 3. التحقق من البيانات

- يتم التحقق من أن تاريخ ووقت النهاية يأتي بعد تاريخ ووقت البداية
- رسالة تنبيه بالعربية في حالة عدم صحة التواريخ

### 4. الربط بالمدرس

- يتم ربط كل امتحان تلقائياً بالمدرس الحالي عبر `teacherId: user.uid`
- المدرس يرى امتحاناته فقط (فلترة حسب teacherId)

### 5. الفلاتر والبحث

- البحث في اسم الامتحان أو اسم الصف
- فلترة حسب الصف من قائمة منسدلة ديناميكية

### 6. عرض البيانات

كل بطاقة امتحان تعرض:
- اسم الامتحان
- الصف
- المدة بالدقائق
- الدرجة الكلية
- عدد الأسئلة
- تاريخ ووقت البداية (بالتنسيق العربي)
- تاريخ ووقت النهاية (بالتنسيق العربي)

### 7. الواجهة

- تم تعريب جميع النصوص
- استخدام `DashboardLayout` مع التحقق من صلاحية المدرس
- تنسيق responsive للأجهزة المختلفة

## كيفية الاستخدام

1. **إضافة امتحان جديد:**
   - اضغط على زر "إضافة امتحان"
   - أدخل اسم الامتحان
   - أدخل اسم الصف
   - حدد المدة والدرجة الكلية
   - اختر تاريخ ووقت البداية والنهاية
   - اضغط "إضافة"

2. **تعديل امتحان:**
   - اضغط على أيقونة التعديل
   - عدل البيانات المطلوبة
   - اضغط "تحديث"

3. **حذف امتحان:**
   - اضغط على أيقونة الحذف
   - قم بتأكيد الحذف

4. **إدارة الأسئلة:**
   - اضغط على "إدارة الأسئلة" لإضافة وتعديل أسئلة الامتحان

5. **عرض النتائج:**
   - اضغط على أيقونة الإحصائيات لعرض نتائج الطلاب

## ملاحظات مهمة

- تأكد من أن Firebase مُعَد بشكل صحيح
- يجب أن يكون المستخدم مسجل دخول كمدرس
- التواريخ يتم حفظها كـ Firestore Timestamps
- يتم عرض التواريخ بالتنسيق العربي المحلي

## الخطوات التالية

يمكن تطوير النظام بإضافة:
- نظام الإشعارات للطلاب عند إضافة امتحان جديد
- إمكانية نسخ امتحان
- إمكانية تصدير الامتحانات
- إحصائيات تفصيلية عن أداء الطلاب
