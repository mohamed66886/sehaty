# دليل صفحة الإعدادات للمعلم

## نظرة عامة
تم تحديث صفحة إعدادات المعلم بشكل كامل لتكون:
- ✅ مربوطة بالكامل مع Firebase
- ✅ متجاوبة تماماً مع الموبايل
- ✅ تحتوي على رسائل نجاح/فشل واضحة
- ✅ حالات تحميل للعمليات

## المميزات الجديدة

### 1. إدارة الملف الشخصي
- تحديث الاسم الكامل
- تحديث البريد الإلكتروني
- تحديث رقم الهاتف
- تحديث التخصص
- إضافة/تعديل النبذة التعريفية
- يتم حفظ كل التغييرات في Firebase

### 2. إدارة الإشعارات
قنوات الإشعارات:
- البريد الإلكتروني
- الإشعارات الفورية
- رسائل SMS

أنواع الإشعارات:
- الواجبات والأنشطة
- الإعلانات العامة
- الرسائل المباشرة
- نتائج التقييمات

### 3. الأمان وأكواد الصفوف

#### أكواد الصفوف الدراسية
- كود سري لكل صف (12 صف من الابتدائي للثانوي)
- إمكانية تعديل أي كود
- توليد كود عشوائي تلقائياً
- إظهار/إخفاء الكود
- نسخ الكود للحافظة
- تصدير جميع الأكواد كملف CSV
- عرض عدد الطلاب في كل صف
- تاريخ آخر تعديل

#### الكود السري الشخصي
- كود من 4 أرقام للمعلم
- يستخدم للعمليات المهمة
- إمكانية التغيير مع التأكيد

#### تغيير كلمة المرور
- إدخال كلمة المرور الحالية
- إدخال كلمة المرور الجديدة
- تأكيد كلمة المرور
- التحقق من Firebase Authentication

### 4. التفضيلات
- اختيار المظهر (فاتح/داكن/تلقائي)
- اختيار اللغة
- اختيار المنطقة الزمنية
- النسخ الاحتياطي التلقائي
- جلسات متعددة

## التصميم المتجاوب

### الموبايل (< 768px)
- قائمة تنقل بشكل Grid 2x2
- أيقونات أكبر
- نصوص قابلة للقراءة
- أزرار بعرض كامل
- مسافات مناسبة

### التابلت والكمبيوتر (> 768px)
- قائمة جانبية كاملة
- تخطيط أفقي
- مساحة أكبر للمحتوى

## البيانات في Firebase

### مستند Teacher في Firestore
```typescript
{
  uid: string,
  subjects: string[],
  centerId: string,
  studentIds: string[],
  bio?: string,
  secretCode?: string,
  classCodes?: [{
    id: string,
    name: string,
    code: string,
    studentsCount: number,
    lastModified: string,
    isActive: boolean
  }],
  notificationSettings?: {
    email: boolean,
    push: boolean,
    sms: boolean,
    assignments: boolean,
    announcements: boolean,
    messages: boolean,
    grades: boolean
  },
  theme?: 'light' | 'dark' | 'auto'
}
```

## رسائل النجاح والفشل

يتم عرض رسائل واضحة للمستخدم:
- ✅ رسالة نجاح خضراء مع أيقونة
- ❌ رسالة فشل حمراء مع أيقونة
- تختفي تلقائياً بعد 5 ثواني
- إمكانية الإغلاق يدوياً

## حالات التحميل

جميع الأزرار تعرض:
- حالة تحميل عند الحفظ
- تعطيل الزر أثناء العملية
- رسالة "جاري الحفظ..." أو "جاري التحديث..."
- أنيميشن دائري للتحميل

## الأمان

- التحقق من صحة البيانات قبل الإرسال
- إعادة المصادقة قبل تغيير كلمة المرور
- التحقق من الأكواد السرية (4 أرقام فقط)
- حماية البيانات الحساسة

## استخدام الصفحة

1. **تحميل البيانات**: تُحمل تلقائياً من Firebase عند فتح الصفحة
2. **التعديل**: قم بتعديل أي حقل
3. **الحفظ**: اضغط زر "حفظ" أو "تحديث"
4. **انتظر**: سترى رسالة نجاح/فشل
5. **التحديث**: البيانات تُحدث في Firebase فوراً

## الملفات المعدلة

1. `/src/app/dashboard/teacher/settings/page.tsx` - الصفحة الرئيسية
2. `/src/types/index.ts` - إضافة حقول جديدة لـ Teacher

## ملاحظات مهمة

⚠️ **تأكد من**:
- وجود اتصال بالإنترنت
- صلاحيات Firestore صحيحة
- المستخدم مسجل دخول كمعلم
- البيانات الأولية موجودة في Firestore

## التطوير المستقبلي

يمكن إضافة:
- تحميل الصورة الشخصية للمعلم
- تاريخ التعديلات
- إحصائيات استخدام الأكواد
- تنبيهات عند تغيير الأكواد
- مزامنة مع التقويم
